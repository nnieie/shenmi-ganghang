# 🌊 海域波浪折射模拟系统

## 项目概述 (´ω｀*)

这是一个基于**有限差分法**的波浪折射数值模拟系统，完全按照您的要求实现：

### ✨ 核心特性

1. **不规则岸线地形** 🏖️
   - 海湾：向陆地凹进 **10米**
   - 海岬：向海洋凸出 **50米**
   - 模拟真实的海岸线形态

2. **智能参数输入** 🎯
   - 输入 **水深 h** + **周期 T** → 自动计算波长 L
   - 输入 **水深 h** + **波长 L** → 自动计算周期 T
   - 基于色散方程：`σ² = g·k·tanh(k·h)`

3. **有限差分法求解** 🔬
   - 数值求解缓坡方程：`∂(k·cosα)/∂y = -∂(k·sinα)/∂x`
   - 计算波浪在不规则地形上的折射效果
   - 模拟波浪在海岬汇聚、在海湾发散的现象

4. **可调参数** 🔧
   - **坡度 i**：海底均匀坡度
   - **波高 H**：初始波浪高度
   - **水深 h**、**周期 T**、**波长 L**（任选两个）
   - **海湾凹进深度**、**海岬凸出距离**
   - **初始波向角 α₀**

## 🎨 效果图说明

程序完全按照您提供的效果图实现：

- **波峰线**（蓝色实线）：显示波浪传播时的相位面，在海岬处汇聚，在海湾处发散
- **波向线**（黄色竖线）：垂直于波峰线，表示波浪能量传播方向
- **等深线**（橙色虚线）：标注不同水深，从海岸线向深水区延伸
- **海岸线**（橙色粗线）：包含海湾和海岬的不规则形状
- **陆地区域**：橙色斜纹填充

## 🚀 快速开始

### 1. 安装依赖
```bash
cd my-app
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 打开浏览器
访问 `http://localhost:5173/`

## 📖 使用指南

### 参数设置面板（右侧）

#### 🌀 波浪参数
- **初始水深 h (m)**：深水区的水深，默认 20m
- **周期 T (s)**：波浪周期，默认 8s
- **波长 L (m)**：波浪波长，可选（与T互斥）
- **波高 H (m)**：波浪高度，默认 2m

💡 **提示**：周期T和波长L只需输入一个，另一个会通过色散关系自动计算！

#### 🏖️ 地形参数
- **海底坡度 i**：均匀坡度，默认 0.01 (1%)
- **海湾凹进深度 (m)**：海湾向陆地凹进的距离，默认 10m
- **海岬凸出距离 (m)**：海岬向海洋凸出的距离，默认 50m
- **初始波向角 α₀ (°)**：深水区波浪入射角，默认 0° (垂直入射)

#### 👁️ 显示选项
- ✅ 显示波峰线和波向线
- ✅ 显示等深线
- ✅ 显示波向箭头

### 编辑参数
1. 点击右上角的 **"✏️ 编辑"** 按钮
2. 修改所需参数
3. 点击 **"✅ 应用更改"** 生效
4. 或点击 **"❌ 取消"** 放弃修改
5. 点击 **"🔄 重置默认"** 恢复初始值

## 🔬 核心算法

### 1. 色散关系求解
使用牛顿迭代法求解波数 k：
```
σ² = g·k·tanh(k·h)
其中：σ = 2π/T (角频率)
     k = 2π/L (波数)
```

### 2. 有限差分法
数值求解波向角 α 的空间分布：
```
∂(k·cosα)/∂y = -∂(k·sinα)/∂x
```

采用中心差分格式，从深水区向浅水区逐步推进求解。

### 3. 岸线生成
使用高斯函数生成包含海湾和海岬的不规则岸线：
```typescript
coastlineY = baseline + bayEffect + capeEffect
```
- 海湾效应：使用正高斯函数，向陆地凹进
- 海岬效应：使用负高斯函数，向海洋凸出

### 4. 等深线计算
根据海底坡度和岸线形状，计算不同水深的等值线：
```
等深线Y坐标 = 海岸线Y坐标 + 目标水深 / 坡度
```

## 📊 计算结果

右侧面板底部显示实时计算结果：
- **波长 L**：通过色散关系计算
- **周期 T**：通过色散关系计算
- **波速 C**：C = L / T
- **波数 k**：k = 2π / L

## 🎯 物理意义

### 波浪折射现象
当波浪从深水传播到浅水时：
1. **波速减小**：根据 `C = √(gh)` (浅水波) 或色散关系
2. **波向改变**：遵循斯涅尔定律
3. **波长缩短**：L = C·T，随波速减小而减小

### 地形影响
- **海岬**：波浪能量汇聚，波高增大，折射角增大
- **海湾**：波浪能量发散，波高减小，折射角减小

这就是为什么海岬处海浪更猛烈，而海湾处相对平静！

## 📂 项目结构

```
src/
├── App3.tsx                    # 主应用（新）
├── waveRefraction.ts           # 波浪折射物理模型
├── useWaveRefractionModel.ts   # React Hook
├── WaveRefractionView.tsx      # 可视化组件
├── styles2.css                 # 样式文件
└── main.tsx                    # 入口文件
```

## 🔧 技术栈

- **React 18** + **TypeScript**
- **Vite** - 快速构建工具
- **SVG** - 矢量图形渲染
- **有限差分法** - 数值计算

## 📝 参数推荐

### 典型海浪场景
1. **风浪** (Wind Waves)
   - T = 5-8s
   - H = 1-3m
   - 坡度 i = 0.01-0.02

2. **涌浪** (Swell)
   - T = 10-15s
   - H = 2-4m
   - 坡度 i = 0.005-0.01

3. **极端海况**
   - T = 15-20s
   - H = 5-10m
   - 坡度 i = 0.02-0.05

## ⚠️ 注意事项

1. **参数范围**：
   - 水深 h > 1m
   - 周期 T > 0.1s
   - 波长 L > 1m
   - 坡度 0.001 < i < 0.1

2. **计算精度**：
   - 网格分辨率：80×60 (可调整)
   - 迭代收敛阈值：0.001 rad

3. **性能**：
   - 修改参数后会重新计算，可能需要几秒
   - 大网格或复杂地形会增加计算时间

## 🎓 理论基础

本系统基于以下理论：

1. **线性波理论** (Linear Wave Theory)
2. **缓坡方程** (Mild Slope Equation)
3. **斯涅尔定律** (Snell's Law)
4. **色散关系** (Dispersion Relation)
5. **有限差分法** (Finite Difference Method)

## 📚 参考文献

- Dean, R. G., & Dalrymple, R. A. (1991). *Water Wave Mechanics for Engineers and Scientists*.
- Mei, C. C. (1983). *The Applied Dynamics of Ocean Surface Waves*.

## 🤝 贡献

如有问题或建议，欢迎提出！

## 📜 许可证

MIT License

---

**开发者**: 2025秋季学期海洋工程课程项目 (´∀｀)♡

**最后更新**: 2025-11-11

喵~ 祝使用愉快！🌊✨
